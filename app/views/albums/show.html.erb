<div class="onbook-body">
  <h1 id='onebook'>jquery.onebook3d.jsを使って画像を本をめくる様にします。<br>以下の画像をマウス右クリックしながら左右に移動させてみてください。</h1>
  
  <div style="padding: 0 30px 30px 30px;">
    <div id="books"></div>
  </div>
</div>

<!--
<% if @album.photos.attached? %>
  <% @album.photos.each do |photo| %>
    <li><%= image_tag photo %></li>
  <% end %>
<% end %>
-->

<!-- Active Storageで取得した複数枚画像のURL取得 -->
<div class="hidden" style="display: none">
  <% if @album.photos.attached? %>
    <% @album.photos.each do |photo| %>
      <p class="js-photo-url"><%= rails_blob_url(photo, only_path: true) %></p>
    <% end %>
  <% end %>
</div>

<script src="../../../js/jquery-1.11.0.min.js"></script>
<script src="../../../js/jquery.mousewheel.min.js"></script>
<script src="../../../js/three.min.js"></script>
<script src="../../../js/jquery.onebook3d-2.33.js"></script>
<script>
  let array = [];

  // Active Storageでアップロードされた複数画像のパスを取得
  let albumPhotoUrls = document.querySelectorAll('.js-photo-url')

  console.log("photoのURL取得", albumPhotoUrls);

  albumPhotoUrls.forEach(photoUrl => {
    array.push(photoUrl.textContent);
  });

  console.log("arrayにURL要素を順に追加", array);

  $('#books').onebook(array);

</script>
